{% load custom_filters %}

{% if insights %}
<div class="w-full mx-auto p-4 bg-white border border-gray-200 rounded-lg shadow sm:p-6 dark:bg-gray-800 dark:border-gray-700 my-16">
    <div class="card-body">
        <div class="card-title flex gap-2 items-center">
            {% if ai_mode %}
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="orange" class="bi bi-lightbulb" viewBox="0 0 16 16">
                    <path d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a2 2 0 0 0-.453-.618A5.98 5.98 0 0 1 2 6m6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1"/>
                </svg>
            {% else %}
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="brown" class="bi bi-lightbulb-off" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M2.23 4.35A6 6 0 0 0 2 6c0 1.691.7 3.22 1.826 4.31.203.196.359.4.453.619l.762 1.769A.5.5 0 0 0 5.5 13a.5.5 0 0 0 0 1 .5.5 0 0 0 0 1l.224.447a1 1 0 0 0 .894.553h2.764a1 1 0 0 0 .894-.553L10.5 15a.5.5 0 0 0 0-1 .5.5 0 0 0 0-1 .5.5 0 0 0 .288-.091L9.878 12H5.83l-.632-1.467a3 3 0 0 0-.676-.941 4.98 4.98 0 0 1-1.455-4.405zm1.588-2.653.708.707a5 5 0 0 1 7.07 7.07l.707.707a6 6 0 0 0-8.484-8.484zm-2.172-.051a.5.5 0 0 1 .708 0l12 12a.5.5 0 0 1-.708.708l-12-12a.5.5 0 0 1 0-.708"/>
                </svg>
            {% endif %}

            <h5 class="text-3xl font-bold text-gray-900 dark:text-white">Insights and Recommendations</h5>
        </div>
        <ul class="my-4 space-y-8 py-8">
            {% for insight in insights %}
                <li class="p-3 py-8 bg-gray-50 dark:bg-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-500 shadow">
                    <strong class="text-base font-bold text-gray-900 dark:text-white">{{ insight.title }}:</strong> 
                    <span class="text-sm font-normal text-gray-500 dark:text-gray-400">{{ insight.description|safe }}</span>
                    <p class="text-xs font-medium text-gray-500 dark:text-gray-400">{{ insight.metrics }}</p>
                </li>
            {% endfor %}
        </ul>
        <p class="text-xs font-medium text-gray-500">For more information about Customer Life Time Value, please refer to the following:
            <ul class="list-disc ml-8">
                <li><a href="https://cio-wiki.org/wiki/Customer_Lifetime_Value" target="_blank" class="text-blue-500 hover:underline">cio-wiki.org</a></li>
                <li><a href="https://blog.hubspot.com/service/how-to-calculate-customer-lifetime-value" target="_blank" class="text-blue-500 hover:underline">blog.hubspot.com - CLTV</a></li>
                <li><a href="https://blog.hubspot.com/service/what-does-cac-stand-for?hubs_content=blog.hubspot.com%2Fservice%2Fhow-to-calculate-customer-lifetime-value&hubs_content-cta=customer%20acquisition%20cost%20(CAC)" target="_blank" class="text-blue-500 hover:underline">blog.hubspot.com - CAC</a></li>
            </ul>
        </p>
    </div>
</div>
{% endif %}
